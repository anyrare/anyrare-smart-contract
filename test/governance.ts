import { expect } from "chai";

export const initPolicies = [
  {
    policyName: "ARA_COLLATERAL_WEIGHT",
    policyWeight: 400000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 432000,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 0,
  },
  {
    policyName: "ARA_MINT_MANAGEMENT_FUND_WEIGHT",
    policyWeight: 600000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 432000,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 0,
  },
  {
    policyName: "BUYBACK_WEIGHT",
    policyWeight: 50000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 432000,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 0,
  },
  {
    policyName: "OPEN_AUCTION_NFT_PLATFORM_FEE",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 90000,
    decider: 1,
  },
  {
    policyName: "OPEN_AUCTION_NFT_REFERRAL_FEE",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 10000,
    decider: 1,
  },
  {
    policyName: "EXTENDED_AUCTION_NFT_TIME_TRIGGER",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 600,
    decider: 1,
  },
  {
    policyName: "EXTENDED_AUCTION_NFT_DURATION",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 600,
    decider: 1,
  },
  {
    policyName: "MEET_RESERVE_PRICE_AUCTION_NFT_TIME_LEFT",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 86400,
    decider: 1,
  },
  {
    policyName: "CLOSE_AUCTION_NFT_PLATFORM_FEE",
    policyWeight: 22500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "CLOSE_AUCTION_NFT_REFERRAL_BUYER_FEE",
    policyWeight: 2500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "CLOSE_AUCTION_NFT_REFERRAL_SELLER_FEE",
    policyWeight: 2000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "NFT_MINT_FEE",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 10000,
    decider: 1,
  },
  {
    policyName: "NFT_CUSTODIAN_CAN_CLAIM_DURATION",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 7776000,
    decider: 1,
  },
  {
    policyName: "CREATE_COLLECTION_FEE",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 10000,
    decider: 1,
  },
  {
    policyName: "BUY_COLLECTION_PLATFORM_FEE",
    policyWeight: 200,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "BUY_COLLECTION_REFERRAL_COLLECTOR_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "BUY_COLLECTION_REFERRAL_INVESTOR_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "SELL_COLLECTION_PLATFORM_FEE",
    policyWeight: 200,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "SELL_COLLECTION_REFERRAL_COLLECTOR_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "SELL_COLLECTION_REFERRAL_INVESTOR_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "TRANSFER_COLLECTION_PLATFORM_FEE",
    policyWeight: 200,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "TRANSFER_COLLECTION_REFERRAL_COLLECTOR_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "TRANSFER_COLLECTION_REFERRAL_SENDER_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "TRANSFER_COLLECTION_REFERRAL_RECEIVER_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "OPEN_AUCTION_COLLECTION_DURATION",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 432000,
    decider: 1,
  },
  {
    policyName: "OPEN_AUCTION_COLLECTION_NEXT_BID_WEIGHT",
    policyWeight: 100000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "CLOSE_AUCTION_COLLECTION_PLATFORM_FEE",
    policyWeight: 200,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "CLOSE_AUCTION_COLLECTION_REFERRAL_COLLECTOR_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "CLOSE_AUCTION_COLLECTION_REFERRAL_INVESTOR_FEE",
    policyWeight: 25,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "MANAGERS_LIST",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 432000,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 0,
  },
  {
    policyName: "AUDITORS_LIST",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 110000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "CUSTODIANS_LIST",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "OPEN_BUY_IT_NOW_NFT_PLATFORM_FEE",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 10000,
    decider: 1,
  },
  {
    policyName: "OPEN_BUY_IT_NOW_NFT_REFERRAL_FEE",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 1000,
    decider: 1,
  },
  {
    policyName: "BUY_IT_NOW_NFT_PLATFORM_FEE",
    policyWeight: 22500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "BUY_IT_NOW_NFT_REFERRAL_BUYER_FEE",
    policyWeight: 2500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "BUY_IT_NOW_NFT_REFERRAL_SELLER_FEE",
    policyWeight: 2000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "OFFER_NFT_DURATION",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 864000,
    decider: 1,
  },
  {
    policyName: "OFFER_NFT_PLATFORM_FEE",
    policyWeight: 22500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "OFFER_NFT_REFERRAL_BUYER_FEE",
    policyWeight: 2500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "OFFER_NFT_REFERRAL_SELLER_FEE",
    policyWeight: 2000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 0,
    decider: 1,
  },
  {
    policyName: "REDEEM_NFT_PLATFORM_FEE",
    policyWeight: 20000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 1000,
    decider: 1,
  },
  {
    policyName: "REDEEM_NFT_REFERRAL_FEE",
    policyWeight: 20000,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 1000,
    decider: 1,
  },
  {
    policyName: "REDEEM_NFT_REVERT_DURATION",
    policyWeight: 0,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 2592000,
    decider: 1,
  },
  {
    policyName: "TRANSFER_NFT_PLATFORM_FEE",
    policyWeight: 22500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 1000,
    decider: 1,
  },
  {
    policyName: "TRANSFER_NFT_REFERRAL_SENDER_FEE",
    policyWeight: 2500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 1000,
    decider: 1,
  },
  {
    policyName: "TRANSFER_NFT_REFERRAL_RECEIVER_FEE",
    policyWeight: 2500,
    maxWeight: 1000000,
    voteDuration: 432000,
    effectiveDuration: 86400,
    minWeightOpenVote: 100000,
    minWeightValidVote: 510000,
    minWeightApproveVote: 750000,
    policyValue: 1000,
    decider: 1,
  },
];

export const initGovernancePolicies = async (
  governanceContract: any,
  manager: any,
  auditor: any,
  custodian: any
) => {
  console.log("\n*** Init Governance Policies");

  console.log(initPolicies.length);
  await governanceContract.initPolicy(
    manager.address,
    auditor.address,
    custodian.address,
    initPolicies.length,
    initPolicies
  );

  console.log("governance policies");

  expect(
    (await governanceContract.getPolicy("ARA_COLLATERAL_WEIGHT")).policyWeight
  ).to.equal(400000);
  console.log("Test: Get ARA_COLLATERAL_WEIGHT");
  expect(
    (await governanceContract.getPolicy("OPEN_AUCTION_NFT_PLATFORM_FEE"))
      .decider
  ).to.equal(1);
  expect(
    +(await governanceContract.getPolicy("OPEN_AUCTION_NFT_PLATFORM_FEE"))
      .policyValue
  ).to.equal(90000);

  console.log("Test: Get OPEN_AUCTION_PLATFORM_FEE");
  expect(
    (
      await governanceContract.getPolicy(
        "MEET_RESERVE_PRICE_AUCTION_NFT_TIME_LEFT"
      )
    ).policyValue
  ).to.equal(86400);
  console.log("Test: Get MEET_RESERVE_PRICE_AUCTION_NFT_TIME_LEFT");

  const getManager = await governanceContract.getManager(0);
  expect({
    addr: getManager.addr,
    controlWeight: +getManager.controlWeight,
  }).to.eql({
    addr: manager.address,
    controlWeight: 1000000,
  });
  console.log("Test: Get manager");
  expect(await governanceContract.isAuditor(auditor.address)).to.equal(true);
  console.log("Test: auditor is auditor");
  expect(await governanceContract.isCustodian(custodian.address)).to.equal(
    true
  );
  console.log("Test: custodian is custodian");
  expect(await governanceContract.isManager(manager.address)).to.equal(true);
  console.log("Test: manager is manager");
  expect(
    (await governanceContract.getPolicy("CLOSE_AUCTION_NFT_PLATFORM_FEE"))
      .policyWeight
  ).to.equal(22500);
  console.log("Test: close auction platform fee to equal 22500");
};
